---
title:  "CS지식의 정석" 

categories:
  - Interview
tags:
  - []

comments: true

toc: true
toc_sticky: true

date: 2022-07-13
last_modified_at: 2022-07-13
---

## Chapter 03 운영체제

### 03-1 운영체제와 컴퓨터
- 운영체제의 역할은 크게 네가지가 있다
- CPU 스크줄링과 프로세스 관리 : CPU 소유권을 어떤 프로세스에 할당할지, 프로세스의 생성과 삭제, 자원 할당 및 반환을 관리
- 메모리 관리 : 한정된 메모리를 어떤 프로세스에 얼만큼 할당해야 하는지 관리
- 디스크 파일 관리 : 디스크 파일을 어떠한 방법으로 보관할지 관리
- I/O 디바이스 관리 : I/O 디바이스들인 마우스, 키보드와 컴퓨터 간에 데이터를 주고받는 것을 관리
- 운영체제의 구조는 GUI, 시스템콜, 커널, 드라이버가 핵심이다
- GUI : 사용자가 전자장치와 상호 작용할 수 있도록 하는 사용자 인터페이스의 한 형태
- 시스템콜 : 운영체제가 커널에 접근하기 위한 인터페이스이며 유저 프로그램이 운영체제의 서비스를 받기 위해 커널 함수를 호출할 때 쓴다, 유저 프로그램이 I/O 요청으로 트랩(trap)을 발동하면 올바른 I/O 요청인지 확인한 후 유저 모드가 시스템콜을 통해 커널 모드로 변환되어 실행된다
- 커널 : 운영체제의 핵심 부분이자 시스템콜 인터페이스를 제공하며 보안, 메모리, 프로세스, 파일 시스템, I/O 디바이스, I/O 요청 관리 등 운영체제의 중추적인 역할을 한다
- 드라이버 : 하드웨어를 제어하기 위한 소프트웨어
- 프로세스, 스레드, 메모리 -> 시스템콜 -> 커널 -> OS ( 프로세스나 스레드에서 운영체제로 어떠한 요청을 할 때 시스템콜 이라는 인터페이스와 커널을 거쳐 운영체제에 전달되는 과정 )
- 컴퓨터는 CPU, DMA 컨트롤러, 메모리, 타이머, 디바이스 컨트롤러 등으로 이루어져 있다
- CPU : 산술논리연산장치, 제어장치, 레지스터로 구성되어 있는 컴퓨터 장치이며 인터럽트에 의해 단순히 메모리에 존재하는 명령어를 해석하여 실행하는 일꾼이다, 커널이 프로그램을 메모리에 올려 프로세스로 만들면 일꾼인 CPU가 이를 처리한다
- 제어장치가 메모리에 계산할 값을 로드 또는 레지스터에 로드 -> 제어장치가 레지스터에 있는 값을 계산하라고 산술논리연산장치에 명령 -> 제어장치가 계산된 값을 다시 레지스터에서 메모리로 계산한 값을 저장
- 인터럽트는 어떤 신호가 들어왔을 때 CPU를 잠깐 정지시키는 것을 말한다 키보드 마우스 등 IO 디바이스로 인한 인터럽트, 0으로 숫자를 나누는 산술 연산에서의 인터럽트, 프로세스 오류 등으로 발생한다
- 인터럽트가 발생되면 인터럽트 핸들러 함수가 모여 있는 인터럽트 벡터로 가서 인터럽트 핸들러 함수가 실행된다 ( 하드웨어 인터럽트, 소프트웨어 인터럽트 )
- DMA 컨트롤러 : I/O 디바이스가 메모리에 직접 접근할 수 있도록 하는 하드웨어 장치인데 CPU에만 너무 많은 인터럽트 요청이 들어오기 때문에 CPU 부하를 막아주는 보조 일꾼 이라고 보면 된다
- 디바이스 컨트롤러 : 컴퓨터와 연결되어 있는 IO 디바이스들의 작은 CPU를 말한다
- 시스템콜이 작동될 때 modebit을 참고해서 유저 모드와 커널 모드를 구분한다
- modebit의 0은 커널 모드, 1은 유저모드라고 설정됩니다 ( 책에 있는 오타 수정 )

### 03-2 메모리

![memory_layer](https://user-images.githubusercontent.com/80055816/178681983-146ca6be-e261-4062-b761-58173f0deb3d.png){: width="70%" height="70%"}{: .align-center}

- 레지스터 : CPU 안에 있는 작은 매모리이며 속도가 가장 빠르다
- 메모리 계층이 존재하는 이유는 경제성 때문이다
- 게임을 실행하다 보면 로딩 중 이라는 메시지가 나오는 것을 볼 수 있다 이는 하드디스크 또는 인터넷에서 데이터를 읽어 RAM으로 전송하는 과정이 아직 끝나지 않음을 의미한다
- 캐시 : 데이터를 미리 복사해 놓는 임시 저장소이자 빠른 장치와 느린 장치에서 속도 차이에 따른 병목 현상을 줄이기 위한 메모리를 말한다
- 메모리와 CPU 사이의 속도 차이가 너무 크기 때문에 그 중간에 레지스터 계층을 둬서 속도 차이를 해결 하는데 이렇게 속도 차이를 해결하기 위해 계층 사이에 있는 계층을 캐시 계층 이라고 한다
- 지역성의 원리, 시간 지역성 : 최근 사용한 데이터에 다시 접근하려는 특성
- 공간 지역성, 최근 접근한 데이터를 이루고 있는 공간이나 그 가까운 공간에 접근하는 특성을 말한다
- 캐시히트 : 캐시에서 원하는 데이터를 찾았다면 캐시히트라고 한다
- 캐시미스 : 캐시에서 원하는 데이터를 찾지 못해 주 메모리로 가서 데이터를 찾아오는 것을 캐시미스라고 한다
- 레지스터는 주 메모리에 비하면 굉장히 작고 주 메모리는 굉장히 크기 때문에 작은 레지스터가 캐시 계층으로써 역할을 잘 해주려면 캐시 매핑을 어떻게 하느냐가 중요하다
- 가상메모리 : 컴퓨터가 실제로 이용 가능한 메모리 자원을 추상화하여 이를 사용하는 사용자들에게 매우 큰 메모리로 보이게 만드는 것을 말한다
- 가상 주소는 메모리관리장치(MMU)에 의해 실제 주소로 변환되며, 이 덕분에 사용자는 실제 주소를 의식할 필요 없이 프로그램을 구축할 수 있게 된다
- 가상 메모리는 가상 주소와 실제 주소가 매핑되어 있고 프로세스의 주소 정보가 들어 있는 페이지 테이블로 관리된다 이때 속도 향상을 위해 TLB를 쓴다
- TLB : 메모리와 CPU 사이에 있는 주소 변환을 위한 캐시이다 페이지 테이블에 있는 리스트를 보관하며 CPU가 페이지 테이블까지 가지 않도록 해 속도를 향상시킬 수 있는 캐시 계층이다 ( 페이지 테이블은 주메모리에 있다 )
- 페이지 폴트 : 프로세스의 주소 공간에는 존재하지만 지금 이 컴퓨터의 RAM에는 없는 데이터에 접근했을 경우에 발생한다 ( 교재 오타 )
- 스와핑 : 메모리의 당장 사용하지 않는 영역을 하드디스크로 옮기고 하드디스크의 일부분을 마치 메모리처럼 불러와쓰는 것, 이를 통해 마치 페이지폴트가 일어나지 않은 것처럼 만듭니다 ( 교재 오타 수정 )
- 페이지 : 가상 메모리를 사용하는 최소 크기 단위
- 프레임 : 실제 메모리를 사용하는 최소 크기 단위
- 스레싱 : 메모리의 페이지 폴트율이 높은 것을 의미하며, 이는 컴퓨터의 심각한 성능 저하를 초래한다
- 스레싱의 원인 : 메모리에 너무 많은 프로세스가 동시에 올라가기 때문이다
- 스레싱의 악순환 과정 : 페이지 폴트가 일어나면 CPU 이용률이 낮아진다 -> 운영체제가 CPU가 한가한가? 라고 생각하여 가용성을 더 높이기 위해 더 많은 프로세스를 메모리에 올린다 -> 이와 같은 악순환이 반복된다
- 스레싱을 해결하는 하드웨어 적인 방법 : 메모리를 늘리거나 HDD를 SSD로 바꾼다
- 스레싱을 해결하는 운영체제 적인 방법 1 : 작업 세트(working set)는 프로세스의 과거 사용 이력인 지역성을 통해 결정된 페이지 집합을 만들어서 미리 메모리에 로드하는 것이다 미리 메모리에 로드하면 탐색에 드는 비용을 줄일 수 있고 스와핑 또한 줄일 수 있다
- 스레싱을 해결하는 운영체제 적인 방법 2 : PFF(Page Fault Frequency)는 페이지 폴트 빈도를 조절하는 방법으로 상한선과 하한선을 만드는 방법이다 만약 상한선에 도달하면 프레임을 늘리고 하한선에 도달하면 프레임을 줄인다
- 메모리 할당, 연속 할당 : 고정 분할 방식과 가변 분할 방식이 있는데 고정 분할 방식은 내부 단편화가 발생할 수 있고 가변 분할 방식은 외부 단편화가 발생할 수 있다
- 메모리 할당, 불연속 할당 : 페이징은 동일한 크기의 페이지 단위로 나누어 메모리의 서로 다른 위치에 프로세스를 할당하는 것이고 세그멘테이션은 페이지 단위가 아니라 의미 단위인 세그먼트로 나누는 방식이다
- 페이지 교체 알고리즘, FIFO : 가장 먼저 온 페이지를 교체 영역에 가장 먼저 놓는 방법
- 페이지 교체 알고리즘, LRU : 참조가 가장 오래된 페이지를 바꾸는 방법
- 페이지 교체 알고리즘, LFU :가장 참조 횟수가 적은 페이지를 교체하는 방법

### 03-3 프로세스와 스레드
- 프로세스는 컴퓨터에서 실행되고 있는 프로그램을 말한다
- HDD/SSD에 있는 프로그램을 인스턴스화 하면 프로세스가 된다
- 컴파일 과정 : 전처리( 주석 제거, 헤더 파일 병합, 매크로 치환 ) -> 컴파일러( 어셈블리어로 변환 ) -> 어셈블러 ( 어셈블리어를 목적 코드로 변환 ) -> 링커( 프로그램 내에 있는 라이브러리 함수 또는 다른 파일들과 목적 코드를 결합하여 실행 파일을 만든다 )
- 정적 라이브러리 : 프로그램 빌드 시 라이브러리가 제공하는 모든 코드를 실행 파일에 넣는다 ( 외부 의존도가 낮고, 메모리 효율성이 떨어진다 )
- 동적 라이브러리 : 프로그램 실행 시 필요할 때만 DLL 파일에서 함수를 참조한다 ( 외부 의존도가 높고, 메모리 효율성이 좋다 )

<br>

## Chapter 99 Copyright

[ 인프런 큰돌님 강의 영상 ](https://www.inflearn.com/course/%EA%B0%9C%EB%B0%9C%EC%9E%90-%EB%A9%B4%EC%A0%91-cs-%ED%8A%B9%EA%B0%95/dashboard)

<br>

[맨 위로 이동하기](#){: .btn .btn--primary }{: .align-right}